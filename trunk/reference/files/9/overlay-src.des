  дATE: 07-19╓91 (11:28)              нUMBER: 12922 OF 13111  тO: рыан тхомпсон @ 914/605       рEFER#: нонефROM: геоффреы велсх                  рEAD: носUBJ: ожерлаыс                      сTATUS: публиц мессагецONF: цоммодоре-64 (4)           рEAD тYPE: генерал (+) рYAN тHOMPSON @ 914/605 WROTE:  >   и WAS WRITING AN OVERLAY TO TEST THEM OUT, AND и >REFORMATTED THE DISK WITH THE CAPTURED OVERLAY DOCS...COULD >YOU PERCHANCE POST THEM HERE AGAIN?    и'LL ADD IT TO THE END OF THIS MESSAGE.  >  аLSO, IF YOU WANT TO SEE A HACKED (AWFUL JOB) VERSION OF >дESTERM WITH A 66-LINE DISPLAY, YOU COULD CALL THIS ббс AND >CHECK THE MAIL--и'M GOING TO FILE-ATTACH IT TO A DESRIPTION >IN THE LOCAL пOST оFFICE. >  и DON'T REMEMBER IF THE ORIGIN LINE HAS THE NUMBER: (707) >444-8140 ---    иF YOU LEAVE IT TO ME, и'LL PICK IT UP AND WE'LL LOOK AT IT SOMETIME.тHANKS. фROM: ROOT@SPINQ.ууцпдATE: сUN мAR 03 08:12:15 1991 аS PROMISED, HERE IS A BRIEF FILE DESCRIBING THE OVERLAY CALLS FORдESтERM ж2.00 (тHE LAST THREE ARE NEW FOR ж2.10 -- SO DON'T USE THEMJUST YET...).  тHE LIST IS COMPLETE, BUT THE COMMETS ARE RATHER TERSE.иF YOU HAVE SPECIFICQUESTIONS, POST THEM TOCOMP.SYS.CBM. ;;   фORMAT OF THE FIRST FEW BYTES OF AN OVERLAY FILE;                орг     $б000       ; CODE STARTS AT $б000;                дц      $44,$4D     ; LITERAL "мд" AS A SMALL CHECK THATYOU DID                                    ; LOAD AN OVERLAY FILE                дц.W    CODESTART   ; ADDR OF START OF CODE (2 BYTES,LOW, HIGH)                дц      TYPE        ; TYPE = $00 MEANS EXECUTABLE CODE                                    ; TYPE = $01 MEANS ADDED PROTOCOL                дц      "PROTOCOL NAME  "                                    ; NAME OF THE PROTOCOL THAT WILL SHOW UP                                    ; IN THE NORMALLY 'жACANT' SLOT.  IF TYPE                                    ; = 0 THEN YOU DON'T NEED TO HAVE THIS                                    ; FIELD  (цбм асции!!!);; PLACE CODE HERE...;CODESTART       ртс                 ; IF THIS IS A PROTOCOL OVERLAY,THEN ь                                    ; WILL CONTAIN 0 IF DOWNLOAD OR 1 IF UPLOAD;; ;;   хEADER FILE FOR дESтERM OVERLAYS;; PLACE THIS CODE SOMWHERE IN YOUR OVERLAY (OR JUST THE PARTS YOU NEED);; FIRST SOME LOACTIONS THAT GET USED (0 PAGE AND COMMON MEMORY...);; иGNORE EVERYTHING YOU KNOW ABOUT THE ц128 KERNAL AND CONVENTIONS, THIS IS; ALMOST NOTHING LIKE IT...;TEMPPTR         еяу $ф9     ; TWO BYTES USED AS POINTERENDSVLO         еяу $84     ; TWO BYTES USED AS POINTERMAXLEN          еяу $86     ; LENGAMESVBNK           еяу $87     ; BANK TO SAVE FROMLDBNK           еяу 88      ; TOINPBUFF         еяу $фд0BUF             еяу $фф0ф   ; PUT THE ь REGISTER HERE IF THE ROUTIN YOU CALL                            ; NEEDS IT...(TE JUMP TABLE ROUTINE CLOBBERS ь)OVER            еяу $фф10   ; THIS IS THE COMMON MEMORY ENTTOVERIRQ         еяу $фф13   ; IS THE IRQ FLAG (NON 0 MEANS IRQ)OVERIND         еяу $фф14   ; (фф14) IS VECTOR TO YOUR ROUTINE                                     ; WHICH IS CALLED 60 TIMES/SEC IF OVERIRQ <> 0;PRINT           лдь #0      ; PRINT асции CHARACTER IN а TO WINDOW                дц $2цсENDрс232       лдь #1      ; SEND CHARACTER IN а OVER SERIAL PORT                            ; USES CORRECT DATA LENGTH, PARITY AND STOP BITS                дц $2цгETрс232        лдь #2      ; RECEIVE CHARACTER IN а, цARRY SET IF NONEWAITING         дц $2цсENDяUICK       лдь #3      ; SEND CHARACTER IN A OVER SERIAL PORT(8-н-1)                дц $2цGETKEY          лдь #4      ; RETURN ASCII CODE FOR KEY PRESS IN а (ELSE ц SET)                дц $2ццONVаTOц        лдь #5      ; CONVERT асции IN а TO цбмсции (RETURN IN а)                дц $2ццONVцTOа        лдь #6      ; CONVERT цбмсции IN а TO асции (RETURN IN а)                дц $2цMAINSAVE        лдь #7      ; сAVE FILE STARTING AT (TEMPPTR) ENDING AT                            ; (ENDSVLO). FILENAME STARTS AT INPBUFF (LENGTH                            ; OF FILENAME IN MAXLEN)                дц $2цSHOWCURS        лдь #8      ; DISPLAY THE CURSOR                дц $2цHIDECURS        лдь #9      ; HIDE THE CURSOR                дц $2цдISABLEрс232    лдь #10     ; STOP рс232 INTERRUPTS                дц $2цеNABLEрс232     лдь #11     ; START рс232 INTERRUPTS                дц $2цCOMPRINT        лдь #12     ; PRINT цбмсции CHARACTER IN а TO WINDOW                дц $2цOPENREAD        лдь #13     ; OPEN A FILE FOR READING (ASKS FOR NAME FOR YOU)                            ; FORMAT OF NAME:   д:FILENAME  (д=DEVICE)                дц $2цдELвIN          лдь #14     ; CLOSE AN OPEN WINDOW (FOR END OF DOWNLOADS)                дц $2цFULLSCREEN      лдь #15     ; SET WINDOW LIMITS TO FULL SCREEN                дц $2црEADбYTE        лдь #16     ; READ A BYTE FROM FILE                дц $2цGETDISKST       лдь #17     ; READ DISK STATUS                дц $2ццLOSEрEAD       лдь #18     ; CLOSE A FILE (THAT WAS READING)                дц $2цTOPMARGIN       лдь #19     ; SET TOP MARGIN OF A WINDOW                дц $2цINITTAB         лдь #20     ; INITIALIZE црц TABLE                дц $2цCRC             лдь #21     ; GENERATE SINGLE црц (IN а)-> USE SETCHECK/GETCHECK                дц $2цSETCHECK        лдь #22     ; SET CHECKSUM/CRC TO ь (LOW) ы (HIGH)                дц $2цGETCHECK        лдь #23     ; READ CHECHSUM/CRC IN ь (LOW) ы (HIGH)                дц $2цSTARTPATT       лдь #24     ; OPEN DISK DIRECTORY FOR PATTERN MATCHING                            ; TO SET PATTERN, SEE SETPATT                дц $2ццLOSEпATT       лдь #25     ; CLOSE DISK DIRECTORY FOR PATTERN MATCHING                дц $2цGETNEXT         лдь #26     ; GET NEXT FILE W/PATTERN                            ; NAME ENDS UP IN INPBUFF                дц $2цSETPATT         лдь #27     ; SET FILE MATCH PATTERN (POSITION IN ы, CHAR IN а)                            ; WHEN YOU NEED TO SPECIFY A PATTERN, COPY IT TO                            ; THE CORRECT PLACE WITH A ROUTINE LIKE THIS:                            ;                            ;           лды #$0ф                            ;   PLOOP   лда MYPATTERN,ы                            ;           йср SETPATT     ; IE ста PATTERN,ы                            ;           деы                            ;           бпл PLOOP                            ;                дц $2цOPENREPL        лдь #28     ; OPEN FOR WRITE W/REPLACE                дц $2цOPENWRITE       лдь #29     ; OPEN FOR WRITE                дц $2цOPENWRITEXX     лдь #30     ; OPEN FILE FOR WRITING (NAME IN INPBUFF ETC)                            ; WILL STRIP DEVICE: FROM THE FILENAME FOR YOU,                            ; AND USE THE SPECIFIED DEVICE...                дц $2цOPENREADXX      лдь #31     ; AS ABOVE, BUT FOR READING A FILE...                дц $2цOPENXFER        лдь #32     ; OPEN TRANSFER WINDOW                дц $2цSAYDONE         лдь #33     ; SAY 'TRANSFER COMPLETE'                дц $2цSAYDOWN         лдь #34     ; SAY 'DOWNLOADING...'                дц $2цSAYUP           лдь #35     ; SAY 'UPLOADING...'                дц $2цSAYABORT        лдь #36     ; SAY 'TRANSFER ABORTED...'                дц $2цSAYFNAME        лдь #37     ; SAY 'фILENAME: XXX...'                дц $2цPLAYTUNE        лдь #38     ; PLAY EITHER THE TUNE OR ANNOYING NOISE                дц $2ццLOSEвRITE      лдь #39     ; CLOSE A FILE FOR WRITING <оригинал мессаге ожер 200 линес, сплит ин 2 ор море> (49 MIN LEFT), (х)ELP, еND OF мESSAGE цOMMAND?  дATE: 07-19╓91 (11:28)              нUMBER: 12923 OF 13111  тO: рыан тхомпсон @ 914/605       рEFER#: нонефROM: геоффреы велсх                  рEAD: носUBJ: ожерлаыс           <цонт>     сTATUS: публиц мессагецONF: цоммодоре-64 (4)           рEAD тYPE: генерал (+)                 дц $2цвRITEбYTE       лдь #40     ; WRITE A BYTE TO WRITE FILE                дц $2цWRITEKEY        лдь #41     ; 'FAKE' A KEYPRESS (NIFTY!!!)                дц $2цCHECKESC        лдь #42     ; RETURN цARRY сET IF ESCAPE HAS BEENPRESSED                            ; DESTROYS OTHER KEYBOARD INPUT; DOES NOTWAIT                            ; FOR A KEY, WILL RETURN RIGHT AWAY...                дц $2цINITMESS        лдь #43     ; OPEN DOWNLOAD STATUS WINDOW                дц $2цINITUMESS       лдь #44     ; OPEN UPLOAD STATUS WINDOW                дц $2цINITYMESS       лдь #45     ; OPEN BATCH DOWNLOAD STATUS WINDOW                дц $2цINITUYMESS      лдь #46     ; OPEN BATCH UPLOAD STATUS WINDOW                дц  $2цSAVESETT        лдь #47     ; SAVE CURRENT PROTOCOL SETTINGS (BEFORE OPENXFER)                дц  $2цRECCSETT        лдь #48     ; RETRIEVE OLD PROTOCOL SETTINGS (AFTER OPENXFER)                дц $2цGETTIME         лдь #49     ; GET ANY CHARACTER WITH TIMEOUT IN а (SECONDS)                            ; CHARACTER IN а OR цARRY SET                ймп OVERJUMP  --- ям V1.00 * оRIGIN: иZOT'S сWAMP (1:221/171.0) 