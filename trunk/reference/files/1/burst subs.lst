.MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE     1                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT                           1    ;************************************************************************                           2    ;*                                                                      *                           3    ;*                          ------------------                          *                           4    ;*  ----------------------  бурст  суброутинес  ----------------------  *                           5    ;*                          ------------------                          *                           6    ;*                                                                      *                           7    ;* тHESE ASSEMBLY LANGUAGE ROUTINES ARE PROVIDED FOR YOUR CONVENIENCE.  *                           8    ;* фOR MOST USERS, THE бурст COMMANDS ARE VERY CRYPTIC, REQUIRING YOU   *                           9    ;* TO WRITE YOUR OWN ASSEMBLY LANGUAGE PROGRAMS TO MAKE USE OF THEM.    *                          10    ;* тHE SET OF ASSEMBLY LANGUAGE SUBROUTINES PROVIDED IN THIS LISTING    *                          11    ;* ARE DESIGNED TO ALLOW ANYONE TO MAKE USE OF THE бурст ROUTINES VERY  *                          12    ;* EASILY.  а басиц PROGRAM NEEDS SIMPLY TO поке THE APPROPRIATE VALUES *                          13    ;* INTO THE VARIABLE LOCATIONS SHOWN BELOW, AND THEN сыс TO THE DESIRED *                          14    ;* ROUTINE.  аLL OF THE бурст PROTOCOL AND HANDSHAKING IS DONE FOR YOU. *                          15    ;* тHE басиц PROGRAM CAN THEN пеек ANY VALUES RETURNED.                 *                          16    ;*                                                                      *                          17    ;* тHE ROUTINES IN THIS LISTING THAT REQUIRE DATA BUFFER STORAGE AREAS  *                          18    ;* ARE PASSED THE LOCATION OF THE BUFFER IN буфлоц.  буфлоц POINTS TO   *                          19    ;* рам LOCATION IN рам BANK 0 OF THE START OF THE BUFFER.  сINCE THE    *                          20    ;* кернел AND и/о ARE NEEDED, рам EXISTS ONLY UP TO $ц000.  сO, YOU ARE *                          21    ;* FREE TO USE ANY рам PAST YOUR басиц TEXT PROGRAM, UP TO $ц000 (басиц *                          22    ;* TEXT NORMALLY STARTS AT $1ц00.  иF BIT-MAP GRAPHICS ARE ENABLED,     *                          23    ;* THEN басиц TEXT STARTS AT $4000).  иF YOU WANT TO пеек AND поке THIS *                          24    ;* MEMORY FROM басиц, BE SURE TO EXECUTE THE 'банк 0' COMMAND.  тHIS    *                          25    ;* TELLS басиц TO пеек AND поке TO THE рам UNDER THE басиц ромS.        *                          26    ;* иF YOU WANT TO MAKE YOUR PROGRAM REAL INTELLIGIENT, THERE ARE        *                          27    ;* POINTERS TO THE BEGINNING AND END OF басиц TEXT ($002д AND $1210,    *                          28    ;* RESPECTIVELY).  аS A GENERAL RULE, WORK YOUR WAY BACK FROM $ц000,    *                          29    ;* AND YOU'LL BE ок.                                                    *                          30    ;*                                                                      *                          31    ;* тO USE THESE ROUTINES, YOUR басиц PROGRAM MUST блоад THE FILE        *                          32    ;* 'бурст субс.бин' BEFORE THEY CAN BE USED.  тHEY LOAD AT $1300, SO    *                          33    ;* THEY ARE IN A SAFE PLACE BELOW басиц TEXT AREA.                      *                          34    ;*                                                                      *                          35    ;* тHERE IS NO бурст формат ROUTINE PROVIDED.  бурст FORMATS CAN BE     *                          36    ;* ACCOMPLISHED EASILY FROM басиц.  фOR EXAMPLE, THE FOLLOWING басиц    *                          37    ;* COMMANDS WILL FORMAT PHYSICAL TRACKS 10 THROUGH 20 OF THE DISK WITH  *                          38    ;* 5 1024 BYTE SECTORS:                                                 *                          39    ;*                                                                      *                          40    ;*     опен 1,8,15                                                      *                          41    ;*     принт#1,"у0";цхр$(3);цхр$(20);цхр$(5);цхр$(10);                  *                          42    ;*                                                                      *                          43    ;* нOTE THE USE OF THE SEMICOLON (;) AT THE END OF THE STATEMENT.  тHIS *                          44    ;* IS VERY IMPORTANT!  иF THERE WAS NO SEMICOLON, THE ц128 WOULD        *                          45    ;* SEND A CARRIAGE RETURN AFTER THE LAST PARAMETER.  сINCE THE 1581     *                          46    ;* COUNTS THE NUMBER OF BYTES SENT TO DETERMINE THE NUMBER OF OPTIONAL  *                          47    ;* PARAMETERS THAT ARE BEING SENT, IT WOULD MISINTERPRET THE CARRIAGE   *                          48    ;* RETURN AS THE NEXT OPTIONAL PARAMETER.  иN THIS CASE, IT WOULD BE    *                          49    ;* FILL BYTE.  аNY FORMATTING ERRORS CAN BE CHECKED VIA THE COMMAND     *                          50    ;* CHANNEL.                                                             *                          51    ;*                                                                      *                          52    ;* сINCE THE бурст COMMANDS MAKE USE OF THE COMMAND CHANNEL TO THE      *                          53    ;* DRIVE, THE COMMAND CHANNEL MUST FIRST BE опенED IN YOUR басиц        *                          54    ;* PROGRAM.  тHE LOGICAL FILE NUMBER WHICH YOU ASSIGNED TO THE COMMAND  *                          55    ;* CHANNEL SHOULD BE POKED TO лф BEFORE CALLING ANY OF THESE ROUTINES.  *                          56    ;*                                                                      *                          57    ;************************************************************************.MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE     2                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT                          58                              59                              60                              61    ;************************************************************************                          62    ;  жARIABLES - жALUES FROM басиц CAN BE покеD, пеекED TO THESE AREAS.                          63    ;************************************************************************           =1300          64            *=$1300                          65          1300 00             66    статус  .BYTE 0                 ; STATUS BYTE      1301 08             67    деж     .BYTE 8                 ; DEVICE NUMBER      1302 08             68    лф      .BYTE 8                 ; LOGICAL FILE NUMBER      1303 =1304          69    трацк   *=*+1                   ; TRACK       1304 =1305          70    сецтор  *=*+1                   ; SECTOR      1305 =1306          71    нумсец  *=*+1                   ; нUMBER OF SECTORS.      1306 =1308          72    буфлоц  *=*+2                   ; пAGE # OF BUFFER TO GET/PUT DATA.      1308 =1309          73    сецсизе *=*+1                   ; сECTOR SIZE (1=256, 2=512, 4=1024)      1309 =130A          74    сиде    *=*+1                   ; пHYSICAL SIDE OF THE DISK (0 OR 1).      130A =130B          75    минсец  *=*+1                   ; мINIMUM LOGICAL SECTOR FOUND IN яуеры.      130B =130C          76    маьсец  *=*+1                   ; мAXIMUM LOGICAL SECTOR FOUND IN яуеры.      130C =130D          77    интлж   *=*+1                   ; пHYSICAL INTERLEAVE FOUND IN яуеры.      130D =130E          78    флаг    *=*+1                   ; еMPTY TRACK FLAG.                          79                                    ;  тHIS FLAG IS USED TO INDICATE THAT THE                          80                                    ;  TRACK OR DATA JUST READ CONTAINS ALL 0'S.                          81                                    ;  тHIS IS HANDY IN SOME CASES, SUCH AS                          82                                    ;  DURING A DISK COPY PROGRAM.  вHEN A DISK                          83                                    ;  IS FORMATTED, THE SECTORS ARE FILLED WITH                          84                                    ;  0'S.  иF A SECTOR TO BE COPIED CONTAINS                          85                                    ;  ALL 0'S, THEN WE DON'T BOTHER TO                          86                                    ;  WRITE IT TO THE DESTINATION DISK (WHICH                          87                                    ;  CAN END UP SAVING A GREAT DEAL OF TIME!).                          88                              89    ;*************************************************************************                          90    ;  оTHER VARIABLES USED IN THE FOLLOWING ROUTINES....                          91    ;*************************************************************************                          92          130E                93    CMDLINE      130E 55 30          94            .BYTE 'U0'              ; бURST PREFIX.           =131A          95            *=*+10                  ; пARAMETER SPACE FOR BURST COMMAND.      131A =131B          96    CMDLEN  *=*+1                   ; лENGTH OF THE COMMAND STRING (# OF BYTES).      131B =131C          97    OLDCLK  *=*+1                   ; сTATUS OF CLOCK LINE.      131C =131D          98    TEMP    *=*+1                          99               =1335         100            *=$1335      1335 47 52 45      101            .BYTE 'GREG BERLIN'     ; вRITTEN BY гREG бERLIN, 3/87      1338 47 20 42                   133B 45 52 4C                   133E 49 4E                                         102                             103    ;**************************************************************************                         104    ;  йумп табле OF AVAILABLE BURST ROUTINES.  сыс TO THESE LOCATIONS FROM                          105    ;  басиц.  тHE бурст ROUTINES THEMSELVES CAN THEN BE MODIFIED OR CUSTOMIZED                         106    ;  WITHOUT AFFECTING THE сыс LOCATIONS FROM басиц.                         107    ;**************************************************************************           =1340         108            *=$1340                         109          1340               110    й_иняуире_формат              1340 4C 148D       111            JMP иняуире_формат              .MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE     3                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT      1343               112    й_пхысицал_реад      1343 4C 136B       113            JMP преад      1346               114    й_логицал_реад      1346 4C 135E       115            JMP лреад      1349               116    й_пхысицал_врите      1349 4C 13F9       117            JMP пврите      134C               118    й_логицал_врите      134C 4C 13EC       119            JMP лврите      134F               120    й_меморы_реад      134F 4C 1532       121            JMP меморы_реад      1352               122    й_меморы_врите      1352 4C 1594       123            JMP меморы_врите      1355               124    й_думп_цацхе      1355 4C 15FB       125            JMP думп_цацхе      1358               126    й_яуеры_формат      1358 4C 14AF       127            JMP яуеры_формат      135B               128    й_цомпаре_меморы      135B 4C 162A       129            JMP цомпаре_меморы                         130                             131    ;**************************************************************************                         132    ;  лOCATIONS OF IMPORTANT ц128 STUFF...                         133    ;**************************************************************************                         134               =FFC9         135    CHKOUT=$FFC9                    ; KERNEL CHANNEL OUTPUT            =FFCC         136    CLRCHN=$FFCC                    ; KERNEL CLEAR CHANNEL           =FFBA         137    SETLFS=$FFBA                    ; KERNEL SET LOGICAL FILE NUMBER           =FFBD         138    SETNAM=$FFBD                    ; KERNEL SET FILENAME           =FFD2         139    BSOUT =$FFD2                    ; KERNEL BASIC INPUT/OUTPUT           =FF47         140    SPIN_OUT=$FF47                  ; сET UP FAST SERIAL FOR INPUT OR OUTPUT.                         141                                    ;  сец FOR OUTPUT, цлц FOR INPUT.           =DD00         142    D2PRA =$DD00                    ; ц128 SERIAL PORT LOCATION           =0010         143    CLKOUT=$10                      ; SLOW SERIAL CLOCK OUTPUT BIT MASK           =0040         144    CLKIN =$40                      ; SLOW SERIAL CLOCK INPUT BIT MASK           =DC0D         145    D1ICR =$DC0D                    ; 6526 циа INTERRUPT CONTROL REGISTER           =DC0C         146    D1SDR =$DC0C                    ; 6526 циа SERIAL DATA REGISTER           =00FA         147    BUFFER=$FA                      ; ZERO PAGE POINTER VARIABLE           =00FC         148    BUFFER2=$FC                     ; ZERO PAGE POINTER VARIABLE                         149                             150    ;**************************************************************************                         151    ;  бурст COMMAND PRIMITIVES                         152    ;**************************************************************************                         153               =0000         154    пбурстрд =$00                   ; пHYSICAL BURST READ.           =0002         155    пбурствр =$02                   ; пHYSICAL BURST WRITE.           =0080         156    лбурстрд =$80                   ; лOGICAL BURST READ           =0082         157    лбурствр =$82                   ; лOGICAL BURST WRITE.           =0004         158    бурст_иняуире  =$04             ; бURST INQUIRE.           =009C         159    думпцацхе =$9ц                  ; дUMP TRACK CACHE ('FORCE' BIT SET)           =0086         160    бурст_яуеры =$86                ; яUERY DISK FORMAT.                         161                             162    ;**************************************************************************                         163    ;* -------------------------  бурст роутинес ---------------------------- *                         164    ;**************************************************************************                         165          135E               166    лреад           ;лOGICAL SECTOR READ FROM THE DEVICE INDICATED BY лф.                         167                    ;тHE TRACK AND SECTOR ARE IN трацк, сецтор. тHE LOCATION                         168                    ;OF START OF THE ц128 BUFFER TO PUT THE READ DATA IN буфлоц. .MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE     4                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT                         169                    ;сTATUS BYTE FROM DRIVE IS RETURNED IN статус.                         170          135E A9 80         171            LDA  #LBURSTRD          ;LOGICAL BURST READ COMMAND      1360 8D 1310       172            STA  CMDLINE+2                1363 A9 01         173            LDA #$01      1365 8D 1308       174            STA сецсизе             ;лOGICAL SECTOR SIZE IS ALWAYS 256 BYTES.      1368 4C 1377       175            JMP реад                         176          136B               177    преад           ;пHYSICAL SECTOR READ FROM DEVICE INDICATED BY лф.                         178                    ;тHE TRACK AND SECTOR ARE IN трацк, сецтор. тHE LOCATION                         179                    ;OF START OF THE ц128 BUFFER TO PUT THE READ DATA IN буфлоц.                         180                    ;тHE PHYSICAL SECTOR SIZE IN сецсизе (1=256,2=512,4=1024).                         181                    ;нUMBER OF SECTORS IN нумсец.                          182                    ;пHYSICAL SIDE OF THE DISK IN сиде (0 OR 1).                         183                    ;сTATUS BYTE FROM DRIVE IS RETURNED IN статус.                         184          136B A9 00         185            LDA #пбурстрд           ;пHYSICAL BURST READ COMMAND.      136D AE 1309       186            LDX сиде                ; цHECK WHICH SIDE TO READ FROM.      1370 F0 02         187            BEQ 1$      1372 09 10         188            ORA #$10                ; иF SIDE 1, THEN SET BIT IN THE COMMAND BYTE.      1374 8D 1310       189    1$      STA  CMDLINE+2                         190                             191          1377               192    реад                         193          1377 AD FF00       194            LDA $FF00               ;сAVE OLD мму SETUP.      137A 48            195            PHA                         196          137B A9 0E         197            LDA #$0E                ;сET мму FOR рам0,кернел,и/о.      137D 8D FF00       198            STA $FF00                         199          1380 20 167D       200            JSR сету0               ;пUT "у0" AT START OF COMMAND STRING.                         201          1383 AD 1303       202            LDA трацк             1386 8D 1311       203            STA цмдлине+3           ; TRACK      1389 AD 1304       204            LDA сецтор      138C 8D 1312       205            STA цмдлине+4           ; SECTOR      138F AD 1305       206            LDA нумсец      1392 8D 1313       207            STA цмдлине+5           ; нUMBER OF SECTORS TO READ.                         208          1395 A9 06         209            LDA #$06                ; лENGTH OF COMMAND STRING.      1397 8D 131A       210            STA цмдлен      139A 20 1664       211            JSR  SENDCMD            ; SEND CMD STRING                         212          139D AD 1306       213            LDA  буфлоц             ; сET UP ZERO PAGE INDIRECT POINTER.      13A0 85 FA         214            STA  буффер      13A2 AD 1307       215            LDA  буфлоц+1      13A5 85 FB         216            STA  буффер+1                         217          13A7 A0 00         218            LDY  #0                 ; CLEAR THE 'EMPTY SECTOR(S)' FLAG.      13A9 8C 130D       219            STY  FLAG                         220          13AC 78            221            SEI                     ; нO IRQ'S ALLOWED DURING HANDSHAKE.                         222          13AD 2C DC0D       223            BIT  D1ICR              ; CLEAR PENDING                         224          13B0 20 169C       225            JSR цлк_цхнг            ;цHANGE STATE OF CLOCK..MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE     5                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT                         226          13B3 AE 1308       227    1$      LDX  сецсизе            ; сECTOR SIZE GIVES # OF PAGES PER SECTOR.                         228          13B6 20 16A5       229            JSR ваит                ;вAIT FOR FAST BYTE (1ST IS STATUS).      13B9 AD DC0C       230            LDA  D1SDR              ;гET STATUS BYTE.      13BC 8D 1300       231            STA статус                         232          13BF 29 0F         233            AND  #15                ;вAS THERE AN ERROR?      13C1 C9 02         234            CMP  #2                 ;       13C3 B0 21         235            BCS  5$                 ; BRANCH IF ERROR OCCURED.                         236          13C5 20 169C       237            JSR цлк_цхнг            ;цHANGE CLOCK SO NEXT BYTE IS SENT.                         238          13C8 20 16A5       239    3$      JSR ваит                ;вAIT FOR THE NEXT BYTE.                         240                  13CB 20 169C       241            JSR цлк_цхнг            ;цHANGE STATE OF CLOCK SO NEXT BYTE IS SENT.      13CE AD DC0C       242            LDA  д1сдр              ;гET THE DATA BYTE      13D1 91 FA         243            STA  (BUFFER),Y         ; AND SAVE IT                          244                                    ;  WHILE NEXT BYTE IS BEING TRANSMITTED.                         245          13D3 0D 130D       246            ORA  FLAG               ;уPDATE 'ZERO' SECTOR FLAG.      13D6 8D 130D       247            STA  FLAG                         248          13D9 C8            249            INY                     ;аNY MORE IN THIS PAGE?      13DA D0 EC         250            BNE  3$                         251          13DC E6 FB         252            INC буффер+1      13DE CA            253            DEX                     ;лOOP FOR THE # OF PAGES PER SECTOR.      13DF D0 E7         254            BNE 3$                         255          13E1 CE 1313       256            DEC цмдлине+5           ;лOOP FOR THE NUMBER OF SECTORS.      13E4 D0 CD         257            BNE 1$                         258          13E6 58            259    5$      CLI                         260          13E7 68            261            PLA                     ;рESTORE мму TO OLD CONFIGURATION.      13E8 8D FF00       262            STA $FF00                         263          13EB 60            264            RTS                         265                             266    ;**************************************************************************                         267          13EC               268    лврите          ;лOGICAL SECTOR WRITE TO THE DEVICE INDICATED BY лф.                         269                    ;тHE TRACK AND SECTOR ARE IN трацк, сецтор. тHE LOCATION                         270                    ;OF START OF ц128 BUFFER CONTAINING WRITE DATA IN буфлоц.                          271                    ;сTATUS BYTE FROM DRIVE IS RETURNED IN статус.                         272          13EC A9 82         273            LDA  #LBURSTWR      13EE 8D 1310       274            STA  CMDLINE+2          ; BURST WRITE      13F1 A9 01         275            LDA #$01      13F3 8D 1308       276            STA сецсизе             ; лOGICAL SECTOR SIZE IS ALWAYS 256 BYTES.      13F6 4C 1405       277            JMP врите                         278                             279          13F9               280    пврите          ;пHYSICAL SECTOR WRITE TO THE DEVICE INDICATED BY лф.                         281                    ;тHE TRACK AND SECTOR ARE IN трацк, сецтор. тHE LOCATION                         282                    ;OF START OF ц128 BUFFER CONTAINING WRITE DATA IN буфлоц..MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE     6                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT                         283                    ;тHE PHYSICAL SECTOR SIZE IN сецсизе (1=256,2=512,4=1024).                         284                    ;нUMBER OF SECTORS IN нумсец.                          285                    ;пHYSICAL SIDE IN сиде.                         286                    ;сTATUS BYTE FROM DRIVE IS RETURNED IN статус.                         287          13F9 A9 02         288            LDA #пбурствр           ;пHYSICAL BURST WRITE COMMAND.      13FB AE 1309       289            LDX сиде                ; цHECK WHICH SIDE TO WRITE TO.      13FE F0 02         290            BEQ 1$      1400 09 10         291            ORA #$10                ; иF SIDE 1, THEN SET BIT IN THE COMMAND BYTE.      1402 8D 1310       292    1$      STA  CMDLINE+2                         293                             294          1405               295    врите                            296                  1405 AD FF00       297            LDA $FF00               ;сAVE OLD мму SETUP.      1408 48            298            PHA                         299          1409 A9 0E         300            LDA #$0E                ;сET мму FOR рам0,кернел,и/о.      140B 8D FF00       301            STA $FF00                         302          140E 20 167D       303            JSR сету0               ;пUT "у0" AT START OF COMMAND STRING.      1411 AD 1303       304            LDA трацк      1414 8D 1311       305            STA цмдлине+3           ; TRACK      1417 AD 1304       306            LDA сецтор      141A 8D 1312       307            STA цмдлине+4           ; SECTOR      141D AD 1305       308            LDA нумсец      1420 8D 1313       309            STA цмдлине+5           ; нUMBER OF SECTORS TO WRITE.                         310          1423 A9 06         311            LDA #$06      1425 8D 131A       312            STA цмдлен              ;цOMMAND LENGTH.      1428 20 1664       313            JSR  SENDCMD            ; SEND CMD STRING                         314          142B AD 1306       315            LDA  буфлоц             ; сET UP ZERO PAGE INDIRECT POINTER.      142E 85 FA         316            STA  буффер      1430 AD 1307       317            LDA буфлоц+1      1433 85 FB         318            STA буффер+1                         319          1435 A9 40         320            LDA  #CLKIN             ;иNITIAL CLOCK STATUS.      1437 8D 131B       321            STA  OLDCLK                         322          143A A0 00         323            LDY  #0      143C 78            324            SEI                     ; NO IRQ'S DURING BURST HANDSHAKE                         325          143D AE 1308       326    1$      LDX  сецсизе            ; сECTOR SIZE GIVES # OF PAGES PER SECTOR.                         327          1440 38            328            SEC                     ;тURN FAST SERIAL TO OUTPUT MODE.      1441 20 FF47       329            JSR  SPIN_OUT                         330          1444 AD DD00       331    2$      LDA  D2PRA              ;вAIT FOR STATE CHANGE.      1447 4D 131B       332            EOR  OLDCLK      144A 29 40         333            AND  #CLKIN      144C F0 F6         334            BEQ  2$                         335          144E 4D 131B       336            EOR  OLDCLK             ;цHANGE STATUS OF олдцлк.      1451 8D 131B       337            STA  OLDCLK                         338          1454 B1 FA         339            LDA  (BUFFER),Y         ; GET DATA .MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE     7                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT      1456 8D DC0C       340            STA  D1SDR              ;  & SEND IT                         341          1459 20 16A5       342            JSR ваит                ;вAIT FOR THE BYTE TO BE TRANSMITTED.                         343          145C C8            344            INY      145D D0 E5         345            BNE  2$                 ;аNY MORE LEFT IN THIS PAGE?                         346          145F E6 FB         347            INC  BUFFER+1      1461 CA            348            DEX                     ;лOOP FOR THE # OF PAGES PER SECTOR.      1462 D0 E0         349            BNE  2$                         350          1464 18            351            CLC                     ;тURN AROUND TO INPUT MODE TO GET статус.      1465 20 FF47       352            JSR  SPIN_OUT                         353          1468 2C DC0D       354            BIT  D1ICR              ; CLEAR PENDING                         355          146B 20 1688       356            JSR  CLKLO              ; SET CLOCK LOW WHEN READY FOR STATUS                         357          146E 20 16A5       358            JSR ваит                ;вAIT FOR THE BYTE TO BE SHIFTED IN.      1471 AD DC0C       359            LDA  D1SDR              ;гET THE STATUS BYTE.      1474 8D 1300       360            STA статус              ;сAVE IT.      1477 48            361            PHA      1478 20 1693       362            JSR  CLKHI              ;рELEASE THE SLOW CLOCK LINE.      147B 68            363            PLA                         364          147C 29 0F         365            AND  #15                ;цHECK FOR ANY ERROR.      147E C9 02         366            CMP  #2       1480 B0 05         367            BCS  7$                 ;  BRANCH IF THERE WAS AN ERROR.                         368                  1482 CE 1313       369            DEC  цмдлине+5          ;лOOP FOR THE NUMBER OF SECTORS.      1485 D0 B6         370            BNE  1$                         371          1487 58            372    7$      CLI                         373          1488 68            374            PLA                     ;рESTORE OLD MEMORY CONFIGURATION.      1489 8D FF00       375            STA $FF00                         376          148C 60            377            RTS                         378                             379    ;**********************************************************************                         380          148D               381    иняуире_формат  ;сENDS AN иняуире диск COMMAND TO THE DRIVE INDICATE BY                         382                    ;THE LOGICAL FILE (лф).  сTATUS IS RETURNED IN статус.                         383          148D 20 167D       384            JSR сету0               ;пUT "у0" AT START OF COMMAND STRING.      1490 A9 04         385            LDA  #бурст_иняуире     ; INQUIRE BURST COMMAND      1492 8D 1310       386            STA  CMDLINE+2      1495 A9 03         387            LDA #$03                ; LENGTH OF COMMAND.      1497 8D 131A       388            STA цмдлен      149A 20 1664       389            JSR  SENDCMD            ; SEND CMD STRING                         390          149D 78            391            SEI                     ;дISABLE INTERRUPTS DURING HANDSHAKE.                         392          149E 2C DC0D       393            BIT д1ицр               ;цLEAR ANY BYTE READY THAT'S PENDING.                         394          14A1 20 169C       395            JSR цлк_цхнг            ;цHANGE CLOCK SO 1581 SENDS NEXT.      14A4 20 16A5       396            JSR ваит                ;вAIT FOR THE BYTE TO BE SHIFTED IN..MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE     8                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT      14A7 AD DC0C       397            LDA д1сдр               ;гET THE STATUS BYTE.      14AA 8D 1300       398            STA статус              ;сAVE IT OFF.                         399          14AD 58            400            CLI      14AE 60            401            RTS                         402                             403    ;**********************************************************************                         404          14AF               405    яуеры_формат    ;сENDS A яуеры диск формат COMMAND TO THE DRIVE INDICATE BY                         406                    ;THE LOGICAL FILE (лф).  пHYSICAL TRACK NUMBER TO QUERY                          407                    ;SHOULD BE PROVIDED IN трацк.  пHYSICAL SIDE SHOULD                         408                    ;BE PROVIDED IN сиде.  сTATUS IS RETURNED IN статус.                         409                    ;нUMBER OF SECTORS FOUND ON THE TRACK RETURNED IN нумсец.                         410                    ;лOGICAL TRACK NUMBER FOUND IN THE SECTOR HEADERS RETURNED                         411                    ;IN трацк.  мINIMUM LOGICAL SECTOR NUMBER FOUND IN THE                         412                    ;SECTOR HEADERS IS RETURNED IN минсец.  тHE MAXIMIUM                         413                    ;LOGICAL SECTOR IS RETURNED маьсец.  пHYSICAL INTERLEAVE                         414                    ;IS RETURNED IN интлж.                          415                    ;иF AN ERROR IS ENCOUNTERED IN COMPILING THIS INFORMATION                         416                    ;(AS INDICATED BY статус), THEN NONE OF THE RETURN VALUES                         417                    ;ARE VALID (EXCEPT статус).                         418          14AF 20 167D       419            JSR сету0               ;пUT "у0" AT START OF COMMAND STRING.                         420          14B2 A9 86         421            LDA  #бурст_яуеры       ;яуеры диск BURST COMMAND      14B4 AE 1309       422            LDX сиде                ; сET THE SIDE BIT ACCORDINGLY.      14B7 D0 02         423            BNE 4$      14B9 09 10         424            ORA #$10      14BB 8D 1310       425    4$      STA CMDLINE+2                         426          14BE AD 1303       427            LDA трацк               ; пHYSICAL TRACK OFFSET.      14C1 8D 1311       428            STA CMDLINE+3      14C4 A9 04         429            LDA #$04                ; LENGTH OF COMMAND.      14C6 8D 131A       430            STA цмдлен      14C9 20 1664       431            JSR  SENDCMD            ; SEND CMD STRING                         432          14CC 78            433            SEI                     ;дISABLE INTERRUPTS DURING HANDSHAKE.                         434          14CD 2C DC0D       435            BIT д1ицр               ;цLEAR ANY BYTE READY THAT'S PENDING.                         436          14D0 20 169C       437            JSR цлк_цхнг            ;цHANGE STATE OF CLOCK SO 1581 SENDS NEXT.      14D3 20 16A5       438            JSR ваит                ;вAIT FOR THE FIRST STATUS BYTE.      14D6 AD DC0C       439            LDA д1сдр               ;гET THE STATUS BYTE (STATUS OF TRACK 0).      14D9 8D 1300       440            STA статус              ;сAVE IT OFF.                         441          14DC 29 0F         442            AND #$0F                ;вAS THERE AN ERROR?      14DE C9 02         443            CMP #2      14E0 B0 4E         444            BCS 5$                  ; BRANCH IF THERE WAS AN ERROR.                         445          14E2 20 169C       446            JSR цлк_цхнг            ;цHANGE STATE OF CLOCK, SO 1581 SENDS NEXT.      14E5 20 16A5       447            JSR ваит                ;вAIT FOR NEXT STATUS BYTE TO BE READY.      14E8 AD DC0C       448            LDA д1сдр               ;гET IT (STATUS OF TRACK трацк).      14EB 8D 1300       449            STA статус              ;сAVE IT.                         450          14EE 29 0F         451            AND #$0F                ;вAS THERE AN ERROR?      14F0 C9 02         452            CMP #2        14F2 B0 3C         453            BCS 5$                  ; BRANCH IF AN ERROR..MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE     9                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT                         454          14F4 20 169C       455            JSR цлк_цхнг            ;цHANGE STATE OF CLOCK, SO 1581 SENDS NEXT.      14F7 20 16A5       456            JSR ваит                ;вAIT FOR 'NUMBER OF SECTORS BYTE' TO BE READY.      14FA AD DC0C       457            LDA д1сдр               ;гET IT.      14FD 8D 1305       458            STA нумсец              ;сAVE IT.                         459                             460          1500 20 169C       461            JSR цлк_цхнг            ;цHANGE STATE OF CLOCK, SO 1581 SENDS NEXT.      1503 20 16A5       462            JSR ваит                ;вAIT FOR 'LOGICAL TRACK #' BYTE TO BE READY.      1506 AD DC0C       463            LDA д1сдр               ;гET IT.      1509 8D 1303       464            STA трацк               ;сAVE IT.                         465          150C 20 169C       466            JSR цлк_цхнг            ;цHANGE STATE OF CLOCK, SO 1581 SENDS NEXT.      150F 20 16A5       467            JSR ваит                ;вAIT FOR 'MINIMUM SECTOR #' BYTE TO BE READY.      1512 AD DC0C       468            LDA д1сдр               ;гET IT.      1515 8D 130A       469            STA минсец              ;сAVE IT.                         470          1518 20 169C       471            JSR цлк_цхнг            ;цHANGE STATE OF CLOCK, SO 1581 SENDS NEXT.      151B 20 16A5       472            JSR ваит                ;вAIT FOR 'MAXIMUM SECTOR #' BYTE TO BE READY.      151E AD DC0C       473            LDA д1сдр               ;гET IT.      1521 8D 130B       474            STA маьсец              ;сAVE IT.                         475          1524 20 169C       476            JSR цлк_цхнг            ;цHANGE STATE OF CLOCK, SO 1581 SENDS NEXT.      1527 20 16A5       477            JSR ваит                ;вAIT FOR 'INTERLEAVE' BYTE TO BE READY.      152A AD DC0C       478            LDA д1сдр               ;гET IT.      152D 8D 130C       479            STA интлж               ;сAVE IT.                         480          1530 58            481    5$      CLI      1531 60            482            RTS                         483                             484    ;***************************************************************************                         485          1532               486    меморы_реад     ;бURST MEMORY READ OF THE 1581.  пAGE IN 1581 MEMORY TO                         487                    ;START READING AT IN .ь, NUMBER OF PAGES TO READ IN .ы,                         488                    ;LOCATION TO STORE DATA IN ц128 MEMORY IN буфлоц.                           489                    ;лOGICAL FILE TO BE READ FROM IN лф.                         490          1532 AD FF00       491            LDA $FF00               ;сAVE OLD мму SETUP.      1535 48            492            PHA                         493          1536 A9 0E         494            LDA #$0E                ;сET мму FOR рам0,кернел,и/о.      1538 8D FF00       495            STA $FF00                         496          153B 20 167D       497            JSR сету0               ;пUT "у0" AT START OF COMMAND STRING.      153E A9 3E         498            LDA #$3е                ;('>') 'BURST MEMORY READ' COMMAND STRING.      1540 8D 1310       499            STA цмдлине+2           ;  ( "у0>мр" )      1543 A9 4D         500            LDA #$4д                ;('м')      1545 8D 1311       501            STA цмдлине+3      1548 A9 52         502            LDA #$52                ;('р')      154A 8D 1312       503            STA цмдлине+4      154D 8E 1313       504            STX цмдлине+5           ; 1581 PAGE TO START READING FROM.      1550 8C 1314       505            STY цмдлине+6           ; # OF PAGES TO READ.                         506          1553 A9 07         507            LDA #$07                ; лENGTH OF COMMAND STRING.      1555 8D 131A       508            STA цмдлен      1558 20 1664       509            JSR  SENDCMD            ; SEND CMD STRING                         510    .MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE    10                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT      155B AD 1306       511            LDA  буфлоц             ; сET UP ZERO PAGE INDIRECT POINTER.      155E 85 FA         512            STA  буффер      1560 AD 1307       513            LDA  буфлоц+1      1563 85 FB         514            STA  буффер+1                         515          1565 A9 00         516            LDA  #0                 ; CLEAR THE 'EMPTY SECTOR(S)' FLAG.      1567 8D 130D       517            STA  FLAG                         518          156A 78            519            SEI                     ; нO IRQ'S ALLOWED DURING HANDSHAKE.                         520          156B 2C DC0D       521            BIT  D1ICR              ; CLEAR PENDING                         522          156E 20 169C       523            JSR цлк_цхнг            ;цHANGE STATE OF CLOCK.                         524          1571 A0 00         525            LDY #0      1573 20 16A5       526    3$      JSR ваит                ;вAIT FOR THE BYTE TO BE SHIFTED IN.                         527          1576 20 169C       528            JSR цлк_цхнг            ;цHANGE CLOCK SO NEXT BYTE IS SENT.      1579 AD DC0C       529            LDA  D1SDR              ; GET DATA      157C 91 FA         530            STA  (BUFFER),Y         ;  AND SAVE IT WHILE NEXT BYTE IS TRANSMITTED.                         531          157E 0D 130D       532            ORA  FLAG               ; уPDATE 'ZERO' FLAG.      1581 8D 130D       533            STA  FLAG                         534          1584 C8            535            INY      1585 D0 EC         536            BNE  3$                 ;аNY MORE IN THIS PAGE?                         537          1587 E6 FB         538            INC буффер+1      1589 CE 1314       539            DEC цмдлине+6           ;аNY MORE PAGES TO DO?      158C D0 E5         540            BNE 3$                         541          158E 58            542    5$      CLI                         543          158F 68            544            PLA                     ;рESTORE OLD MEMORY CONFIGURATION.      1590 8D FF00       545            STA $FF00                         546          1593 60            547            RTS                         548                             549                             550    ;***************************************************************************                         551          1594               552    меморы_врите    ;бURST MEMORY WRITE TO THE 1581'S MEMORY.  тHE                         553                    ;LOCATION IN ц128 MEMORY TO SEND DATA FROM IN буфлоц.                         554                    ;тHE PAGE IN 1581 MEMORY TO START WRITING TO IN .ь.                         555                    ;тHE NUMBER OF PAGES TO WRITE IN .ы.                           556                    ;лOGICAL FILE TO BE WRITTEN TO IN лф.                         557          1594 AD FF00       558            LDA $FF00               ;сAVE OLD мму SETUP.      1597 48            559            PHA                         560          1598 A9 0E         561            LDA #$0E                ;сET мму FOR рам0,кернел,и/о.      159A 8D FF00       562            STA $FF00                         563          159D 20 167D       564            JSR сету0               ;пUT "у0" AT START OF COMMAND STRING.      15A0 A9 3E         565            LDA #$3е                ;('>') 'BURST MEMORY WRITE' COMMAND STRING.      15A2 8D 1310       566            STA цмдлине+2           ;  ( "у0>мв" )      15A5 A9 4D         567            LDA #$4д                ;('м').MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE    11                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT      15A7 8D 1311       568            STA цмдлине+3      15AA A9 57         569            LDA #$57                ;('в')      15AC 8D 1312       570            STA цмдлине+4      15AF 8E 1313       571            STX цмдлине+5           ; 1581 PAGE TO START WRITING TO.      15B2 8C 1314       572            STY цмдлине+6           ; # OF PAGES TO WRITE.                         573          15B5 A9 07         574            LDA #$07                ; лENGTH OF COMMAND STRING.      15B7 8D 131A       575            STA цмдлен                         576          15BA 20 1664       577            JSR  SENDCMD            ; SEND CMD STRING                         578          15BD AD 1306       579            LDA  буфлоц             ; сET UP ZERO PAGE INDIRECT POINTER.      15C0 85 FA         580            STA  буффер      15C2 AD 1307       581            LDA  буфлоц+1      15C5 85 FB         582            STA  буффер+1                         583          15C7 A9 40         584            LDA  #CLKIN             ;иNITIAL CLOCK STATUS.      15C9 8D 131B       585            STA  OLDCLK                         586          15CC A0 00         587            LDY #0      15CE 78            588            SEI                     ;нO иря'S ALLOWED DURING HANDSHAKE.                         589          15CF 38            590            SEC                     ; сET TO OUTPUT MODE.      15D0 20 FF47       591            JSR спин_оут                         592          15D3 AD DD00       593    2$      LDA D2PRA               ;вAIT FOR STATE (SLOW CLOCK LINE) CHANGE.      15D6 4D 131B       594            EOR олдцлк      15D9 29 40         595            AND #цлкин      15DB F0 F6         596            BEQ 2$                         597          15DD 4D 131B       598            EOR олдцлк              ;цHANGE STATUS OF олдцлк VARIABLE.      15E0 8D 131B       599            STA олдцлк                         600          15E3 B1 FA         601            LDA (буффер),Y          ;гET DATA TO WRITE.      15E5 8D DC0C       602            STA д1сдр               ;сEND IT.                         603          15E8 20 16A5       604            JSR ваит                ;вAIT FOR THE BYTE TO BE SENT.                         605          15EB C8            606            INY      15EC D0 E5         607            BNE 2$                  ;мORE IN THIS PAGE?                         608          15EE E6 FB         609            INC буффер+1      15F0 CE 1314       610            DEC цмдлине+6                 15F3 D0 DE         611            BNE 2$                  ;аNY MORE PAGES TO SEND?                         612          15F5 58            613            CLI                         614          15F6 68            615            PLA                     ;рESTORE OLD MEMORY CONFIGURATION.      15F7 8D FF00       616            STA $FF00                         617          15FA 60            618            RTS                         619                             620    ;***************************************************************************                         621          15FB               622    думп_цацхе      ;дUMPS THE TRACK CACHE AT 1581 $0ц00 TO THE PHYSICAL TRACK                         623                    ;SPECIFIED IN трацк, ON THE SIDE SPECIFIED IN сиде.  тHE                         624                    ;'FORCE' BIT IS SET, SO IT IS WRITTEN WHETHER IT IS DIRTY.MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE    12                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT                         625                    ;OR NOT.                         626          15FB 20 167D       627            JSR сету0      15FE A9 9C         628            LDA #думпцацхе          ;дUMP TRACK CACHE COMMAND.                         629          1600 AE 1309       630            LDX сиде                ;  сET сиде BIT ACCORDINGLY.      1603 F0 02         631            BEQ 1$      1605 09 40         632            ORA #$40                         633          1607 8D 1310       634    1$      STA цмдлине+2           ;  пUT THE COMMAND BYTE INTO COMMAND STRING.      160A AD 1303       635            LDA трацк      160D 8D 1311       636            STA цмдлине+3           ;  пHYSICAL TRACK TO DUMP CACHE TO.                         637          1610 A9 04         638            LDA #4      1612 8D 131A       639            STA цмдлен              ;лENGTH OF THE COMMAND STRING.      1615 20 1664       640            JSR сендцмд                         641          1618 78            642            SEI                     ;дISABLE INTERRUPTS DURING HANDSHAKE.                         643          1619 2C DC0D       644            BIT д1ицр               ;цLEAR ANY BYTE READY THAT'S PENDING.                         645          161C 20 169C       646            JSR цлк_цхнг            ;цHANGE CLOCK SO 1581 WILL SEND STATUS BYTE.      161F 20 16A5       647            JSR ваит                ;вAIT FOR BYTE TO BE SHIFTED IN.      1622 AD DC0C       648            LDA д1сдр               ;гET THE STATUS BYTE.      1625 8D 1300       649            STA статус              ;сAVE IT OFF.                         650          1628 58            651            CLI      1629 60            652            RTS                         653                             654    ;***************************************************************************                         655          162A               656    цомпаре_меморы  ;цOMPARES MEMORY BLOCKS IN THE ц128 MEMORY.                         657                    ;нUMBER OF PAGES TO COMPARE IN .а.                         658                    ;фIRST PAGE OF FIRST MEMORY BLOCK IN .ь.                         659                    ;фIRST PAGE OF SECOND MEMORY BLOCK IN .ы.                         660                    ;иF THEY ARE EQUAL, THEN статус=0.                         661          162A 8D 131C       662            STA TEMP                         663          162D AD FF00       664            LDA $FF00               ;сAVE OLD мму SETUP.      1630 48            665            PHA                         666          1631 A9 0E         667            LDA #$0E                ;сET мму FOR рам0,кернел,и/о.      1633 8D FF00       668            STA $FF00                         669          1636 86 FB         670            STX BUFFER+1            ;сET UP мсб OF 1ST MEMORY POINTER.      1638 84 FD         671            STY BUFFER2+1           ;сET UP мсб OF 2ND MEMORY POINTER.      163A AE 131C       672            LDX TEMP                ;нUMBER OF PAGES TO COMPARE.                         673                  163D A9 00         674            LDA #0                  ;сET UP лсб'S OF MEMORY POINTERS.      163F 85 FA         675            STA BUFFER      1641 85 FC         676            STA BUFFER2                         677          1643 8D 1300       678            STA статус              ;иNITIALIZE статус.                         679          1646 A0 00         680            LDY #0                         681    .MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE    13                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT      1648 B1 FA         682    2$      LDA (BUFFER),Y      164A D1 FC         683            CMP (BUFFER2),Y      164C F0 07         684            BEQ 1$                         685          164E A9 FF         686            LDA #$FF                ;нOT EQUAL!  лOAD статус WITH NONZERO.      1650 8D 1300       687            STA статус      1653 D0 0A         688            BNE 99$                 ;  (BRANCH ALWAYS)                         689          1655 C8            690    1$      INY      1656 D0 F0         691            BNE 2$                  ;мORE IN THIS PAGE?                         692          1658 E6 FB         693            INC BUFFER+1      165A E6 FD         694            INC BUFFER2+1      165C CA            695            DEX                     ;# OF PAGES COUNTER.      165D D0 E9         696            BNE 2$                         697                          165F 68            698    99$     PLA                     ;рESTORE OLD MEMORY CONFIGURATION.      1660 8D FF00       699            STA $FF00                         700          1663 60            701            RTS                         702                             703    ;***************************************************************************                         704          1664               705    сендцмд         ;сENDS THE COMMAND IN цмдлине TO THE LOGICAL FILE                         706                    ;INDICATED BY лф.  лENGTH OF THE COMMAND SHOULD BE IN цмдлен.                         707          1664 AE 1302       708            LDX лф      1667 20 FFC9       709            JSR  CHKOUT             ; CHANNEL OUTPUT (POINTED TO BY .ь)      166A A2 00         710            LDX  #0      166C AC 131A       711            LDY  CMDLEN             ; SEND CMD       166F BD 130E       712    1$      LDA  CMDLINE,X      1672 20 FFD2       713            JSR  BSOUT      1675 E8            714            INX      1676 88            715            DEY      1677 D0 F6         716            BNE  1$                         717          1679 20 FFCC       718            JSR  CLRCHN             ; SEND BUFFERED CHAR & EOI      167C 60            719            RTS                         720                             721    ;***************************************************************************                         722          167D A9 55         723    сету0   LDA #85                 ;'у'      167F 8D 130E       724            STA цмдлине      1682 A9 30         725            LDA #48                 ;'0'      1684 8D 130F       726            STA цмдлине+1      1687 60            727            RTS                         728                             729          1688               730    цлкло                   ; SET CLOCK LOW      1688 48            731            PHA      1689 AD DD00       732            LDA  D2PRA                    168C 09 10         733            ORA  #CLKOUT      168E 8D DD00       734            STA  D2PRA      1691 68            735            PLA      1692 60            736            RTS                         737          1693               738    цлкхи                   ; SET CLOCK HIGH.MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE    14                                                                                                        0:BURST SUBS.SRC,S,RERROR ADDR  CODE          SEQ   SOURCE STATEMENT      1693 AD DD00       739            LDA  D2PRA      1696 29 EF         740            AND  #$FF-CLKOUT      1698 8D DD00       741            STA  D2PRA      169B 60            742            RTS                         743          169C               744    цлк_цхнг                ;  CHANGE THE STATE OF THE CLOCK LINE OUTPUT.      169C AD DD00       745            LDA д2пра      169F 49 10         746            EOR #CLKOUT      16A1 8D DD00       747            STA д2пра      16A4 60            748            RTS                         749          16A5               750    ваит                    ;  WAIT FOR THE SHIFT REGISTER TO BE FULL OR EMPTY.      16A5 A9 08         751    1$      LDA #8      16A7 2C DC0D       752            BIT д1ицр      16AA F0 F9         753            BEQ 1$      16AC 60            754            RTS                         755                             756                             757            .END    0 ERRORS DETECTED.MAIN.  HCD65XX V3.1    03-23-87                                                                                PAGE    15                                                                                                                                                        SYMBOL TABLE        <BLANK> = LABEL, <=> = SYMBOL, <+>= MULTIBLY DEFINEDBSOUT            =FFD2  BUFFER           =00FA  BUFFER2          =00FC  BUFLOC            1306  BURST_INQUIRE    =0004  BURST_QUERY      =0086  CHKOUT           =FFC9  CLKHI             1693  CLKIN            =0040  CLKLO             1688  CLKOUT           =0010  CLK_CHNG          169C  CLRCHN           =FFCC  CMDLEN            131A  CMDLINE           130E  COMPARE_MEMORY    162A  D1ICR            =DC0D  D1SDR            =DC0C  D2PRA            =DD00  DEV               1301  DUMPCACHE        =009C  DUMP_CACHE        15FB  FLAG              130D  INQUIRE_FORMAT    148D  INTLV             130C  J_COMPARE_MEMORY  135B  J_DUMP_CACHE      1355  J_INQUIRE_FORMAT  1340  J_LOGICAL_READ    1346  J_LOGICAL_WRITE   134C  J_MEMORY_READ     134F  J_MEMORY_WRITE    1352  J_PHYSICAL_READ   1343  J_PHYSICAL_WRITE  1349  J_QUERY_FORMAT    1358  LBURSTRD         =0080  LBURSTWR         =0082  LF                1302  LREAD             135E  LWRITE            13EC  MAXSEC            130B  MEMORY_READ       1532  MEMORY_WRITE      1594  MINSEC            130A  NUMSEC            1305  OLDCLK            131B  PBURSTRD         =0000  PBURSTWR         =0002  PREAD             136B  PWRITE            13F9  QUERY_FORMAT      14AF  READ              1377  SECSIZE           1308  SECTOR            1304  SENDCMD           1664  SETLFS           =FFBA  SETNAM           =FFBD  SETU0             167D  SIDE              1309  SPIN_OUT         =FF47  STATUS            1300  TEMP              131C  TRACK             1303  WAIT              16A5  WRITE             1405  